import{c as p,a as k,r as l,j as e,L as y,X as w,f as h}from"./index-B8S532Nu.js";import{C as z,a as D}from"./circle-x-CoO-joAO.js";import{T as M,a as T}from"./triangle-alert-0c_qEnGy.js";const E=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],L=p("pen",E);const I=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],A=p("save",I),R=()=>{const{data:N=[],refetch:f,isLoading:C}=k(),[n,c]=l.useState(""),[a,o]=l.useState(null),[u,x]=l.useState(!1),[d,m]=l.useState(null),[r,j]=l.useState({message:null,type:null}),g=()=>{f()},t=(s,i="success")=>{j({message:s,type:i}),setTimeout(()=>j({message:null,type:null}),3e3)},v=async s=>{if(s.preventDefault(),!!n.trim()){x(!0);try{a?(await h.update(a,n),t("Cập nhật thành công!","success")):(await h.create(n),t("Thêm mới thành công!","success")),c(""),o(null),g()}catch(i){console.error(i),t(i.message,"error")}finally{x(!1)}}},b=async()=>{if(d)try{await h.delete(d),t("Xóa chuyên mục thành công.","success"),g()}catch(s){console.error(s),t(s.message,"error")}finally{m(null)}},S=s=>{o(s.id),c(s.name)};return C?e.jsx("div",{className:"loader-container",children:e.jsx(y,{className:"spin",size:48})}):e.jsxs("div",{className:"category-manager-view animate-fade container",children:[r.message&&e.jsx("div",{className:"toast-container",children:e.jsxs("div",{className:`toast toast-${r.type}`,children:[r.type==="success"?e.jsx(z,{size:20}):e.jsx(D,{size:20}),e.jsx("span",{children:r.message})]})}),e.jsx("h1",{className:"category-header",children:"List Categories"}),e.jsxs("form",{className:"category-editor-form",onSubmit:v,children:[e.jsx("h3",{className:"category-form-title",children:a?"Edit Category":"Add New Category"}),e.jsx("div",{className:"form-group",children:e.jsx("input",{className:"form-input",value:n,onChange:s=>c(s.target.value),placeholder:"Category name (e.g., Docker, CI/CD...)",required:!0})}),e.jsxs("div",{className:"category-form-actions",children:[e.jsxs("button",{className:"btn-primary",disabled:u,children:[u?e.jsx(y,{className:"spin",size:16}):e.jsx(A,{size:16}),e.jsx("span",{children:a?"Update":"Save"})]}),a&&e.jsxs("button",{className:"btn-outline",type:"button",onClick:()=>{o(null),c("")},children:[e.jsx(w,{size:16})," ",e.jsx("span",{children:"Cancel"})]})]})]}),e.jsx("div",{className:"category-table-wrapper",children:e.jsxs("table",{className:"category-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:N?.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"category-name-cell",children:s.name}),e.jsx("td",{className:"category-action-cell",children:e.jsx("div",{className:"category-action-group",children:s.id!=1?e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn-table-action",onClick:()=>S(s),children:[e.jsx(L,{size:14})," Edit"]}),e.jsxs("button",{className:"btn-table-action btn-table-delete",onClick:()=>m(s.id),children:[e.jsx(M,{size:14})," Delete"]})]}):null})})]},s.id))})]})}),d&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx(T,{size:48,color:"#ef4444",style:{margin:"0 auto 16px"}}),e.jsx("h3",{className:"modal-title",children:"Confirm Delete?"}),e.jsx("p",{className:"modal-text",children:"Related data will be affected. Are you sure you want to delete?"}),e.jsxs("div",{className:"modal-buttons",children:[e.jsx("button",{className:"btn-outline",onClick:()=>m(null),children:"Cancel"}),e.jsx("button",{className:"btn-delete",onClick:b,children:"Confirm Delete"})]})]})})]})};export{R as default};
