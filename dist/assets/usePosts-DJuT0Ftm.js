const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B8S532Nu.js","assets/index-BAcj-Y_D.css"])))=>i.map(i=>d[i]);
import{S as b,s as f,h as y,i as v,n as m,k as h,r as c,l as q,m as w,_ as O,o as n,p as d,q as o}from"./index-B8S532Nu.js";var C=class extends b{#e;#r=void 0;#t;#s;constructor(t,e){super(),this.#e=t,this.setOptions(e),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const e=this.options;this.options=this.#e.defaultMutationOptions(t),f(this.options,e)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#t,observer:this}),e?.mutationKey&&this.options.mutationKey&&y(e.mutationKey)!==y(this.options.mutationKey)?this.reset():this.#t?.state.status==="pending"&&this.#t.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#t?.removeObserver(this)}onMutationUpdate(t){this.#a(),this.#n(t)}getCurrentResult(){return this.#r}reset(){this.#t?.removeObserver(this),this.#t=void 0,this.#a(),this.#n()}mutate(t,e){return this.#s=e,this.#t?.removeObserver(this),this.#t=this.#e.getMutationCache().build(this.#e,this.options),this.#t.addObserver(this),this.#t.execute(t)}#a(){const t=this.#t?.state??v();this.#r={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#n(t){m.batch(()=>{if(this.#s&&this.hasListeners()){const e=this.#r.variables,a=this.#r.context,r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#s.onSuccess?.(t.data,e,a,r)}catch(s){Promise.reject(s)}try{this.#s.onSettled?.(t.data,null,e,a,r)}catch(s){Promise.reject(s)}}else if(t?.type==="error"){try{this.#s.onError?.(t.error,e,a,r)}catch(s){Promise.reject(s)}try{this.#s.onSettled?.(void 0,t.error,e,a,r)}catch(s){Promise.reject(s)}}}this.listeners.forEach(e=>{e(this.#r)})})}};function l(t,e){const a=h(),[r]=c.useState(()=>new C(a,t));c.useEffect(()=>{r.setOptions(t)},[r,t]);const s=c.useSyncExternalStore(c.useCallback(u=>r.subscribe(m.batchCalls(u)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),p=c.useCallback((u,g)=>{r.mutate(u,g).catch(q)},[r]);if(s.error&&w(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:p,mutateAsync:s.mutate}}const i={getAll:async t=>(await n.get("/posts",{params:t})).data.data||{data:[],current_page:1,last_page:1,per_page:10,total:0,from:0,to:0},getTrending:async(t=5,e=7)=>(await n.get("/posts/trending",{params:{limit:t,days:e}})).data.data||[],getFeatured:async()=>(await n.get("/posts/featured")).data.data||[],getDetail:async t=>(await n.get(`/posts/detail/${t}`)).data.data,getById:async t=>(await n.get(`/posts/${t}`)).data.data,create:async t=>(await n.post("/posts",t,{headers:{"Content-Type":"multipart/form-data"}})).data.data,update:async(t,e)=>(await n.post(`/posts/${t}`,e,{headers:{"Content-Type":"multipart/form-data"}})).data.data,delete:async t=>{await n.delete(`/posts/${t}`)},importFromUrl:async t=>{const{default:e}=await O(async()=>{const{default:p}=await import("./index-B8S532Nu.js").then(u=>u.w);return{default:p}},__vite__mapDeps([0,1]));let s=(await e.create().get(t)).data;return typeof s!="string"&&(s=JSON.stringify(s)),s}},S=t=>d({queryKey:o.posts.list(t),queryFn:()=>i.getAll(t)}),P=(t=5,e=7)=>d({queryKey:["posts","trending",t,e],queryFn:()=>i.getTrending(t,e)}),x=()=>d({queryKey:["posts","featured"],queryFn:()=>i.getFeatured()}),_=t=>d({queryKey:o.posts.detail(t),queryFn:()=>i.getDetail(t),enabled:!!t}),E=()=>{const t=h();return l({mutationFn:e=>i.create(e),onSuccess:()=>{t.invalidateQueries({queryKey:o.posts.all})}})},F=()=>{const t=h();return l({mutationFn:({id:e,formData:a})=>i.update(e,a),onSuccess:(e,a)=>{t.invalidateQueries({queryKey:o.posts.byId(a.id)}),t.invalidateQueries({queryKey:o.posts.all})}})},M=()=>{const t=h();return l({mutationFn:e=>i.delete(e),onSuccess:()=>{t.invalidateQueries({queryKey:o.posts.all})}})};export{x as a,P as b,E as c,F as d,_ as e,M as f,i as p,S as u};
